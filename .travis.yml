language: cpp

git:
  depth: false #shallow clone causes problem with tags
  
addons:
  apt:
    update: true

os:
  - linux
 # - osx
  
compiler:
  - gcc
#  - clang
  
env:
#  - BUILD_CONFIG=Release
  - BUILD_CONFIG=Debug
  
  
branches:
  only:
    - develop
    - master
    - CIDev
    - /^release\/.*$/
    - /^[0-9]+\.[0-9]+\.[0-9]+.*$/

dist: xenial    #ubuntu
    
before_install:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
  - sudo apt-get update -qq
  
install:
  #- sudo apt-get install g++ 
  #- sudo apt-get install gcc
  # boost1.55 libgtest-dev libsnappy-dev
  #- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++
  #- sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc
  # - "cd /usr/src/gtest && sudo cmake -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ . && sudo cmake --build . && sudo mv libg* /usr/local/lib/ ; cd -"
  
before_script:
  - mkdir build
  - cd build
  - cmake -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX ..
  
script: 
  - cmake --build .
  - test/libkafka_asio_test
